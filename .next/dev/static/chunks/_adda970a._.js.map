{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/annapolisciuc/Desktop/Projects/07-routing-nextjs/lib/api.ts"],"sourcesContent":["\nimport axios from \"axios\";\nimport type { NoteCreate, Note } from \"../types/note\";\n\nexport interface NoteResponse {\n  notes: Note[];\n  totalPages: number;\n  page: number;\n}\n\nconst TOKEN = process.env.NEXT_PUBLIC_NOTEHUB_TOKEN;\n\nconst api = axios.create({\n  baseURL: \"https://notehub-public.goit.study/api/notes\",\n  headers: {\n    Authorization: `Bearer ${TOKEN}`,\n  },\n});\n\n\nexport async function fetchNotes(page = 1, perPage = 12, search = ''): Promise<NoteResponse> {\n  const params: Record<string, string | number> = { page, perPage };\n  if (search.trim()) params.search = search.trim();\n\n  const { data } = await api.get<NoteResponse>(\"/\", { params }); \n  return data;\n}\n\n\nexport async function createNote(note: NoteCreate): Promise<Note> {\n  const { data } = await api.post<Note>(\"/\", note);\n  return data;\n}\n\n\nexport async function deleteNote(id: string): Promise<Note> {\n  const { data } = await api.delete<Note>(`/${id}`);\n  return data;\n}\n\n\nexport async function fetchNoteById(id: string): Promise<Note> {\n  console.log(\"API call for note ID:\", id);\n  if (!id) throw new Error(\"Note id is required\");\n  const response = await api.get<Note>(`/${id}`);\n  return response.data;\n}\n\nexport async function fetchNotesByTag(tag?: string, page = 1, perPage = 12): Promise<NoteResponse> {\n  const params: Record<string, string | number> = { page, perPage };\n  \n  if (tag && tag !== \"all\") params.tag = tag; // сервер фильтрует сам\n\n  const { data } = await api.get<NoteResponse>(\"/\", { params });\n  return data;\n}\n\n\n"],"names":[],"mappings":";;;;;;;;;;;;AAUc;AATd;;AASA,MAAM;AAEN,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,SAAS;QACP,eAAe,CAAC,OAAO,EAAE,OAAO;IAClC;AACF;AAGO,eAAe,WAAW,OAAO,CAAC,EAAE,UAAU,EAAE,EAAE,SAAS,EAAE;IAClE,MAAM,SAA0C;QAAE;QAAM;IAAQ;IAChE,IAAI,OAAO,IAAI,IAAI,OAAO,MAAM,GAAG,OAAO,IAAI;IAE9C,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,GAAG,CAAe,KAAK;QAAE;IAAO;IAC3D,OAAO;AACT;AAGO,eAAe,WAAW,IAAgB;IAC/C,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI,CAAO,KAAK;IAC3C,OAAO;AACT;AAGO,eAAe,WAAW,EAAU;IACzC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,MAAM,CAAO,CAAC,CAAC,EAAE,IAAI;IAChD,OAAO;AACT;AAGO,eAAe,cAAc,EAAU;IAC5C,QAAQ,GAAG,CAAC,yBAAyB;IACrC,IAAI,CAAC,IAAI,MAAM,IAAI,MAAM;IACzB,MAAM,WAAW,MAAM,IAAI,GAAG,CAAO,CAAC,CAAC,EAAE,IAAI;IAC7C,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,gBAAgB,GAAY,EAAE,OAAO,CAAC,EAAE,UAAU,EAAE;IACxE,MAAM,SAA0C;QAAE;QAAM;IAAQ;IAEhE,IAAI,OAAO,QAAQ,OAAO,OAAO,GAAG,GAAG,KAAK,uBAAuB;IAEnE,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,GAAG,CAAe,KAAK;QAAE;IAAO;IAC3D,OAAO;AACT","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/NoteList/NoteList.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"button\": \"NoteList-module__LCs_aq__button\",\n  \"content\": \"NoteList-module__LCs_aq__content\",\n  \"deleteButton\": \"NoteList-module__LCs_aq__deleteButton\",\n  \"footer\": \"NoteList-module__LCs_aq__footer\",\n  \"link\": \"NoteList-module__LCs_aq__link\",\n  \"list\": \"NoteList-module__LCs_aq__list\",\n  \"listItem\": \"NoteList-module__LCs_aq__listItem\",\n  \"tag\": \"NoteList-module__LCs_aq__tag\",\n  \"title\": \"NoteList-module__LCs_aq__title\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":["file:///Users/annapolisciuc/Desktop/Projects/07-routing-nextjs/components/NoteList/NoteList.tsx"],"sourcesContent":["\"use client\";\n\nimport css from \"./NoteList.module.css\";\nimport type { Note } from \"@/types/note\";\nimport Link from \"next/link\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { deleteNote } from \"@/lib/api\";\nimport { useState } from \"react\";\n\ninterface NoteListProps {\n  notes: Note[];\n}\n\nexport default function NoteList({ notes }: NoteListProps) {\n  const queryClient = useQueryClient();\n  const [deletingId, setDeletingId] = useState<string | null>(null);\n  const [errorId, setErrorId] = useState<string | null>(null);\n\n  const mutation = useMutation({\n    mutationFn: (id: string) => deleteNote(id),\n    onMutate: (id) => {\n      setDeletingId(id);\n      setErrorId(null);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({queryKey: [\"notes\"]});\n      setDeletingId(null);\n    },\n    onError: (_, id) => {\n      setErrorId(id);\n      setDeletingId(null);\n    },\n  });\n\n  if (!notes.length) {\n    return <p className={css.message}>No notes found.</p>;\n  }\n\n  return (\n    <ul className={css.list}>\n      {notes.map((note) => (\n        <li key={note.id} className={css.listItem}>\n          <h3 className={css.title}>{note.title}</h3>\n          <span className={css.tag}>{note.tag}</span>\n          <p className={css.content}>{note.content.slice(0, 100)}...</p>\n          \n          <div className={css.actions}>\n            <button\n              className={css.deleteButton}\n              disabled={deletingId === note.id}\n              onClick={() => mutation.mutate(note.id)}\n            >\n              {deletingId === note.id ? \"Deleting...\" : \"Delete note\"}\n            </button>\n            {errorId === note.id && (\n              <div className={css.error}>Failed to delete note. Please try again.</div>\n            )}\n          </div>\n          <Link\n          className={css.link}\n  href={`/notes/@modal/${note.id}`} \n>\n  View details\n</Link>\n        </li>\n      ))}\n    </ul>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AAAA;AACA;AACA;;;AAPA;;;;;;AAae,SAAS,SAAS,EAAE,KAAK,EAAiB;;IACvD,MAAM,cAAc,IAAA,2MAAc;IAClC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAgB;IAC5D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAgB;IAEtD,MAAM,WAAW,IAAA,gMAAW,EAAC;QAC3B,UAAU;8CAAE,CAAC,KAAe,IAAA,2HAAU,EAAC;;QACvC,QAAQ;8CAAE,CAAC;gBACT,cAAc;gBACd,WAAW;YACb;;QACA,SAAS;8CAAE;gBACT,YAAY,iBAAiB,CAAC;oBAAC,UAAU;wBAAC;qBAAQ;gBAAA;gBAClD,cAAc;YAChB;;QACA,OAAO;8CAAE,CAAC,GAAG;gBACX,WAAW;gBACX,cAAc;YAChB;;IACF;IAEA,IAAI,CAAC,MAAM,MAAM,EAAE;QACjB,qBAAO,6LAAC;YAAE,WAAW,4JAAG,CAAC,OAAO;sBAAE;;;;;;IACpC;IAEA,qBACE,6LAAC;QAAG,WAAW,4JAAG,CAAC,IAAI;kBACpB,MAAM,GAAG,CAAC,CAAC,qBACV,6LAAC;gBAAiB,WAAW,4JAAG,CAAC,QAAQ;;kCACvC,6LAAC;wBAAG,WAAW,4JAAG,CAAC,KAAK;kCAAG,KAAK,KAAK;;;;;;kCACrC,6LAAC;wBAAK,WAAW,4JAAG,CAAC,GAAG;kCAAG,KAAK,GAAG;;;;;;kCACnC,6LAAC;wBAAE,WAAW,4JAAG,CAAC,OAAO;;4BAAG,KAAK,OAAO,CAAC,KAAK,CAAC,GAAG;4BAAK;;;;;;;kCAEvD,6LAAC;wBAAI,WAAW,4JAAG,CAAC,OAAO;;0CACzB,6LAAC;gCACC,WAAW,4JAAG,CAAC,YAAY;gCAC3B,UAAU,eAAe,KAAK,EAAE;gCAChC,SAAS,IAAM,SAAS,MAAM,CAAC,KAAK,EAAE;0CAErC,eAAe,KAAK,EAAE,GAAG,gBAAgB;;;;;;4BAE3C,YAAY,KAAK,EAAE,kBAClB,6LAAC;gCAAI,WAAW,4JAAG,CAAC,KAAK;0CAAE;;;;;;;;;;;;kCAG/B,6LAAC,0KAAI;wBACL,WAAW,4JAAG,CAAC,IAAI;wBAC3B,MAAM,CAAC,cAAc,EAAE,KAAK,EAAE,EAAE;kCACjC;;;;;;;eApBgB,KAAK,EAAE;;;;;;;;;;AA2BxB;GAvDwB;;QACF,2MAAc;QAIjB,gMAAW;;;KALN","debugId":null}},
    {"offset": {"line": 240, "column": 0}, "map": {"version":3,"sources":["file:///Users/annapolisciuc/Desktop/Projects/07-routing-nextjs/components/NotesPage/NotesPage.tsx"],"sourcesContent":["\"use client\";\n\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { fetchNotesByTag, deleteNote } from \"@/lib/api\";\nimport NoteList from \"../NoteList/NoteList\";\nimport { NoteCreate } from \"@/types/note\";\n\ninterface NotesPageProps {\n  tag: NoteCreate[\"tag\"] | \"all\";\n}\n\nexport default function NotesPage({ tag }: NotesPageProps) {\n  const queryClient = useQueryClient();\n\n  const { data, isLoading } = useQuery({\n    queryKey: [\"notes\", tag],\n    queryFn: () => fetchNotesByTag(tag),\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: deleteNote,\n    onSuccess: () => queryClient.invalidateQueries({ queryKey: [\"notes\", tag] }),\n  });\n\n  const handleDelete = (id: string) => deleteMutation.mutate(id);\n\n  if (isLoading) return <p>Loading notes...</p>;\n  if (!data?.notes.length) return <p>No notes found.</p>;\n\n  return <NoteList notes={data.notes} />;\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AACA;AACA;;;AAJA;;;;AAWe,SAAS,UAAU,EAAE,GAAG,EAAkB;;IACvD,MAAM,cAAc,IAAA,2MAAc;IAElC,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,IAAA,0LAAQ,EAAC;QACnC,UAAU;YAAC;YAAS;SAAI;QACxB,OAAO;kCAAE,IAAM,IAAA,gIAAe,EAAC;;IACjC;IAEA,MAAM,iBAAiB,IAAA,gMAAW,EAAC;QACjC,YAAY,2HAAU;QACtB,SAAS;qDAAE,IAAM,YAAY,iBAAiB,CAAC;oBAAE,UAAU;wBAAC;wBAAS;qBAAI;gBAAC;;IAC5E;IAEA,MAAM,eAAe,CAAC,KAAe,eAAe,MAAM,CAAC;IAE3D,IAAI,WAAW,qBAAO,6LAAC;kBAAE;;;;;;IACzB,IAAI,CAAC,MAAM,MAAM,QAAQ,qBAAO,6LAAC;kBAAE;;;;;;IAEnC,qBAAO,6LAAC,iJAAQ;QAAC,OAAO,KAAK,KAAK;;;;;;AACpC;GAnBwB;;QACF,2MAAc;QAEN,0LAAQ;QAKb,gMAAW;;;KARZ","debugId":null}}]
}